<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HHYC Admin Portal - Volunteer Management</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .auth-section {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.2);
        }

        .admin-content {
            display: none;
        }

        .admin-content.authenticated {
            display: block;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            background: rgba(255,255,255,0.9);
            color: #333;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 0.5rem;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .btn-danger {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
        }

        .admin-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 2rem;
            margin-top: 2rem;
        }

        .admin-panel {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 1.5rem;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255,255,255,0.2);
        }

        .admin-panel h3 {
            margin-bottom: 1rem;
            color: #fff;
        }

        .events-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .event-item {
            background: rgba(255,255,255,0.1);
            padding: 1rem;
            margin-bottom: 0.5rem;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .event-item h4 {
            margin-bottom: 0.5rem;
        }

        .event-item p {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
        }

        .alert-success {
            background: rgba(46, 213, 115, 0.2);
            border: 1px solid rgba(46, 213, 115, 0.4);
        }

        .alert-error {
            background: rgba(255, 107, 107, 0.2);
            border: 1px solid rgba(255, 107, 107, 0.4);
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .admin-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèÜ HHYC Admin Portal</h1>
            <p>Hidden Harbor Yacht Club - Volunteer Management System</p>
        </div>

        <!-- Authentication Section -->
        <div class="auth-section" id="authSection">
            <h2>üîê Administrative Access Required</h2>
            <p>Please enter the admin password to continue</p>
            <div class="form-group">
                <label for="adminPassword">Admin Password</label>
                <input type="password" id="adminPassword" placeholder="Enter admin password">
            </div>
            <button class="btn" onclick="authenticate()">Access Admin Portal</button>
            <div id="authError" class="alert alert-error hidden">
                Invalid password. Please try again.
            </div>
        </div>

        <!-- Admin Content -->
        <div class="admin-content" id="adminContent">
            <div id="statusAlert" class="alert alert-success hidden">
                Status messages will appear here
            </div>

            <div class="admin-grid">
                <!-- Event Creation Panel -->
                <div class="admin-panel">
                    <h3>üìÖ Create New Event</h3>
                    <form id="eventForm">
                        <div class="form-group">
                            <label for="eventName">Event Name</label>
                            <input type="text" id="eventName" required>
                        </div>
                        <div class="form-group">
                            <label for="eventDate">Event Date</label>
                            <input type="date" id="eventDate" required>
                        </div>
                        <div class="form-group">
                            <label for="startTime">Start Time</label>
                            <input type="time" id="startTime" required>
                        </div>
                        <div class="form-group">
                            <label for="endTime">End Time</label>
                            <input type="time" id="endTime" required>
                        </div>
                        <div class="form-group">
                            <label for="location">Location</label>
                            <input type="text" id="location" required>
                        </div>
                        <div class="form-group">
                            <label for="description">Description</label>
                            <textarea id="description" rows="3"></textarea>
                        </div>
                        <button type="submit" class="btn">Create Event</button>
                        <button type="button" class="btn btn-danger" onclick="resetEventForm()">Clear Form</button>
                    </form>
                </div>

                <!-- Existing Events Panel -->
                <div class="admin-panel">
                    <h3>üìã Existing Events</h3>
                    <div class="events-list" id="eventsList">
                        <p>Loading events...</p>
                    </div>
                    <button class="btn" onclick="loadEvents()">Refresh Events</button>
                </div>
            </div>

            <div class="admin-grid">
                <!-- Task Management Panel -->
                <div class="admin-panel">
                    <h3>üìù Create New Task</h3>
                    <form id="taskForm">
                        <div class="form-group">
                            <label for="taskEvent">Select Event</label>
                            <select id="taskEvent" required>
                                <option value="">Choose an event...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="taskName">Task Name</label>
                            <select id="taskName" required>
                                <option value="">Choose task type...</option>
                                <option value="Setup">Setup</option>
                                <option value="Cooking">Cooking</option>
                                <option value="Serving">Serving</option>
                                <option value="Cleanup">Cleanup</option>
                                <option value="Other">Other (Custom)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="customTaskName">Custom Task Name (if Other selected)</label>
                            <input type="text" id="customTaskName">
                        </div>
                        <div class="form-group">
                            <label for="volunteersNeeded">Volunteers Needed</label>
                            <input type="number" id="volunteersNeeded" min="1" max="20" required>
                        </div>
                        <div class="form-group">
                            <label for="taskStartTime">Task Start Time</label>
                            <input type="time" id="taskStartTime" required>
                        </div>
                        <div class="form-group">
                            <label for="taskEndTime">Task End Time</label>
                            <input type="time" id="taskEndTime" required>
                        </div>
                        <div class="form-group">
                            <label for="priority">Priority Level</label>
                            <select id="priority" required>
                                <option value="Medium">Medium</option>
                                <option value="High">High</option>
                                <option value="Low">Low</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="taskDescription">Task Description</label>
                            <textarea id="taskDescription" rows="2"></textarea>
                        </div>
                        <button type="submit" class="btn">Create Task</button>
                        <button type="button" class="btn btn-danger" onclick="resetTaskForm()">Clear Form</button>
                    </form>
                </div>

                <!-- All Tasks Panel -->
                <div class="admin-panel">
                    <h3>üìä All Tasks</h3>
                    <div class="events-list" id="tasksList">
                        <p>Loading tasks...</p>
                    </div>
                    <button class="btn" onclick="loadTasks()">Refresh Tasks</button>
                </div>
            </div>

            <div class="admin-grid">
                <!-- Volunteer Management Panel -->
                <div class="admin-panel">
                    <h3>üë• Registered Volunteers</h3>
                    <div class="events-list" id="volunteersList">
                        <p>Loading volunteers...</p>
                    </div>
                    <button class="btn" onclick="loadVolunteers()">Refresh Volunteers</button>
                </div>

                <!-- Reports Panel -->
                <div class="admin-panel">
                    <h3>üìà System Reports & Analytics</h3>
                    <p>Reports and analytics functionality:</p>
                    <ul style="margin: 1rem 0; padding-left: 2rem;">
                        <li>Volunteer participation statistics</li>
                        <li>Event completion rates</li>
                        <li>Task assignment analytics</li>
                        <li>Email notification logs</li>
                    </ul>
                    <button class="btn" onclick="generateReport()">Generate Report</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Configuration
        const ADMIN_PASSWORD = '7591';
        const APPS_SCRIPT_URL = 'YOUR_APPS_SCRIPT_URL_HERE'; // To be updated with actual Apps Script URL

        // Authentication System
        function authenticate() {
            const password = document.getElementById('adminPassword').value;
            const authError = document.getElementById('authError');
            const authSection = document.getElementById('authSection');
            const adminContent = document.getElementById('adminContent');

            if (password === ADMIN_PASSWORD) {
                authSection.style.display = 'none';
                adminContent.classList.add('authenticated');
                showAlert('Authentication successful! Welcome to HHYC Admin Portal.', 'success');
                loadInitialData();
            } else {
                authError.classList.remove('hidden');
                document.getElementById('adminPassword').value = '';
                setTimeout(() => {
                    authError.classList.add('hidden');
                }, 3000);
            }
        }

        // Allow Enter key for authentication
        document.getElementById('adminPassword').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                authenticate();
            }
        });

        // Event Management Functions
        document.getElementById('eventForm').addEventListener('submit', function(e) {
            e.preventDefault();
            createEvent();
        });

        document.getElementById('taskForm').addEventListener('submit', function(e) {
            e.preventDefault();
            createTask();
        });

        function createEvent() {
            const eventData = {
                name: document.getElementById('eventName').value,
                date: document.getElementById('eventDate').value,
                startTime: document.getElementById('startTime').value,
                endTime: document.getElementById('endTime').value,
                location: document.getElementById('location').value,
                description: document.getElementById('description').value,
                id: generateId(),
                created: new Date().toISOString()
            };

            // For now, store in localStorage until Google Sheets backend is connected
            let events = JSON.parse(localStorage.getItem('hhyc_events') || '[]');
            events.push(eventData);
            localStorage.setItem('hhyc_events', JSON.stringify(events));

            showAlert(`Event "${eventData.name}" created successfully!`, 'success');
            resetEventForm();
            loadEvents();
            loadEventOptions();
        }

        function createTask() {
            const taskName = document.getElementById('taskName').value === 'Other' 
                ? document.getElementById('customTaskName').value 
                : document.getElementById('taskName').value;

            const taskData = {
                eventId: document.getElementById('taskEvent').value,
                name: taskName,
                volunteersNeeded: parseInt(document.getElementById('volunteersNeeded').value),
                startTime: document.getElementById('taskStartTime').value,
                endTime: document.getElementById('taskEndTime').value,
                priority: document.getElementById('priority').value,
                description: document.getElementById('taskDescription').value,
                id: generateId(),
                volunteers: [],
                created: new Date().toISOString()
            };

            // Store in localStorage
            let tasks = JSON.parse(localStorage.getItem('hhyc_tasks') || '[]');
            tasks.push(taskData);
            localStorage.setItem('hhyc_tasks', JSON.stringify(tasks));

            showAlert(`Task "${taskData.name}" created successfully!`, 'success');
            resetTaskForm();
            loadTasks();
        }

        function loadEvents() {
            const events = JSON.parse(localStorage.getItem('hhyc_events') || '[]');
            const eventsList = document.getElementById('eventsList');

            if (events.length === 0) {
                eventsList.innerHTML = '<p>No events created yet. Create your first event!</p>';
                return;
            }

            eventsList.innerHTML = events.map(event => `
                <div class="event-item">
                    <h4>${event.name}</h4>
                    <p><strong>Date:</strong> ${event.date}</p>
                    <p><strong>Time:</strong> ${event.startTime} - ${event.endTime}</p>
                    <p><strong>Location:</strong> ${event.location}</p>
                    <p><strong>Description:</strong> ${event.description}</p>
                    <button class="btn btn-danger" onclick="deleteEvent('${event.id}')">Delete Event</button>
                </div>
            `).join('');
        }

        function loadTasks() {
            const tasks = JSON.parse(localStorage.getItem('hhyc_tasks') || '[]');
            const events = JSON.parse(localStorage.getItem('hhyc_events') || '[]');
            const tasksList = document.getElementById('tasksList');

            if (tasks.length === 0) {
                tasksList.innerHTML = '<p>No tasks created yet. Create your first task!</p>';
                return;
            }

            tasksList.innerHTML = tasks.map(task => {
                const event = events.find(e => e.id === task.eventId);
                const eventName = event ? event.name : 'Unknown Event';
                return `
                    <div class="event-item">
                        <h4>${task.name} (${eventName})</h4>
                        <p><strong>Volunteers Needed:</strong> ${task.volunteersNeeded}</p>
                        <p><strong>Time:</strong> ${task.startTime} - ${task.endTime}</p>
                        <p><strong>Priority:</strong> ${task.priority}</p>
                        <p><strong>Signed Up:</strong> ${task.volunteers.length}/${task.volunteersNeeded}</p>
                        <button class="btn btn-danger" onclick="deleteTask('${task.id}')">Delete Task</button>
                    </div>
                `;
            }).join('');
        }

        function loadEventOptions() {
            const events = JSON.parse(localStorage.getItem('hhyc_events') || '[]');
            const select = document.getElementById('taskEvent');

            select.innerHTML = '<option value="">Choose an event...</option>' + 
                events.map(event => `<option value="${event.id}">${event.name}</option>`).join('');
        }

        function loadVolunteers() {
            const volunteers = JSON.parse(localStorage.getItem('hhyc_volunteers') || '[]');
            const volunteersList = document.getElementById('volunteersList');

            if (volunteers.length === 0) {
                volunteersList.innerHTML = '<p>No volunteers registered yet.</p>';
                return;
            }

            volunteersList.innerHTML = volunteers.map(volunteer => `
                <div class="event-item">
                    <h4>${volunteer.name}</h4>
                    <p><strong>Email:</strong> ${volunteer.email}</p>
                    <p><strong>Phone:</strong> ${volunteer.phone}</p>
                    <p><strong>Joined:</strong> ${new Date(volunteer.joined).toLocaleDateString()}</p>
                </div>
            `).join('');
        }

        function deleteEvent(eventId) {
            if (confirm('Are you sure you want to delete this event?')) {
                let events = JSON.parse(localStorage.getItem('hhyc_events') || '[]');
                events = events.filter(event => event.id !== eventId);
                localStorage.setItem('hhyc_events', JSON.stringify(events));

                // Also delete associated tasks
                let tasks = JSON.parse(localStorage.getItem('hhyc_tasks') || '[]');
                tasks = tasks.filter(task => task.eventId !== eventId);
                localStorage.setItem('hhyc_tasks', JSON.stringify(tasks));

                showAlert('Event deleted successfully!', 'success');
                loadEvents();
                loadTasks();
                loadEventOptions();
            }
        }

        function deleteTask(taskId) {
            if (confirm('Are you sure you want to delete this task?')) {
                let tasks = JSON.parse(localStorage.getItem('hhyc_tasks') || '[]');
                tasks = tasks.filter(task => task.id !== taskId);
                localStorage.setItem('hhyc_tasks', JSON.stringify(tasks));

                showAlert('Task deleted successfully!', 'success');
                loadTasks();
            }
        }

        function resetEventForm() {
            document.getElementById('eventForm').reset();
        }

        function resetTaskForm() {
            document.getElementById('taskForm').reset();
        }

        function generateReport() {
            const events = JSON.parse(localStorage.getItem('hhyc_events') || '[]');
            const tasks = JSON.parse(localStorage.getItem('hhyc_tasks') || '[]');
            const volunteers = JSON.parse(localStorage.getItem('hhyc_volunteers') || '[]');

            const report = `
üìä HHYC System Report - ${new Date().toLocaleDateString()}

üìÖ Events: ${events.length} total
üìù Tasks: ${tasks.length} total  
üë• Volunteers: ${volunteers.length} registered

This is a basic report. Full analytics will be available once Google Sheets backend is connected.
            `;

            alert(report);
        }

        // Utility Functions
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }

        function showAlert(message, type) {
            const alert = document.getElementById('statusAlert');
            alert.textContent = message;
            alert.className = `alert alert-${type}`;
            alert.classList.remove('hidden');

            setTimeout(() => {
                alert.classList.add('hidden');
            }, 5000);
        }

        function loadInitialData() {
            loadEvents();
            loadTasks();
            loadVolunteers();
            loadEventOptions();
        }

        // Custom task name toggle
        document.getElementById('taskName').addEventListener('change', function() {
            const customField = document.getElementById('customTaskName');
            customField.style.display = this.value === 'Other' ? 'block' : 'none';
            if (this.value !== 'Other') {
                customField.value = '';
            }
        });
    </script>
</body>
</html>